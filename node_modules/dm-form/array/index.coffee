_ = require 'lodash'

module.exports = class FormArray extends require('../input')
  view: __dirname
  name: 'dm-form:array'

#  _getExtraFields: -> [
#    'items'
#    'labels'
#  ]
  init: ->
    super
    unless @getAttribute('items') or @getAttribute('meta')?.items
      console.error "Array meta error: No 'items' provided for array " +
          "'#{ @model.get('name') }'"

  create: ->
#    @model.on 'remove', 'value', _.debounce =>
#      @model.set 'rerender', !@model.get('rerender')
#    , 50

  add: ->
    @model.push 'value', undefined
    @model.set 'addItem', !@model.get('addItem')

  remove: (item) ->
    return unless item
    item.parent().remove item.leaf()