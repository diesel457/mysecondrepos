initRoutes = require './initRoutes'
{ pathFor } = require './helpers'


module.exports = (app, routes) ->
  app.__routesRaw = routes
  app._routes = initRoutes app, routes
  app.pathFor = -> pathFor.call this, app._routes, arguments...
  app.proto.pathFor = app.pathFor